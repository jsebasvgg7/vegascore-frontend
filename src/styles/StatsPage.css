/*
   =====================================================================
   STATS PAGE - Diseño Moderno y Responsivo (Modo Claro)
   =====================================================================
*/

/* --- Variables de Diseño --- */
:root {
    --color-primary: #5B21B6;      /* Púrpura Profundo - Énfasis principal */
    --color-primary-light: #7C3AED; /* Púrpura Claro - Hover/Fondo suave */
    --color-background: #F9FAFB;   /* Fondo general muy claro */
    --color-card-background: #FFFFFF; /* Fondo de tarjetas */
    --color-text-primary: #1F2937; /* Texto principal oscuro */
    --color-text-secondary: #4B5563; /* Texto secundario/etiquetas */
    --color-success-exact: #10B981; /* Verde esmeralda para Exacto */
    --color-success-result: #FBBF24; /* Amarillo para Resultado Correcto */
    --color-error: #F87171;        /* Rojo suave para Fallo */
    --shadow-soft: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.04);
    --border-radius-large: 16px;
    --border-radius-card: 12px;
}

/* --- Estructura Principal y Fondo --- */
.stats-page {
    min-height: 100vh;
    background-color: var(--color-background);
    padding: 24px 16px; /* Padding ajustado para móvil */
    position: relative;
    font-family: 'Inter', sans-serif;
}

.stats-page::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    /* Un ligero toque de color degradado en la parte superior */
    height: 300px;
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
    border-radius: 0 0 30px 30px;
    z-index: 0;
    opacity: 0.04; /* Muy sutil */
}

.stats-page-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 30px; /* Espaciado más generoso */
    position: relative;
    z-index: 10;
}

/* --- Encabezado y Selector de Tiempo --- */
.stats-page-header {
    display: flex;
    flex-direction: column; /* Apilado en móvil */
    gap: 10px;
}

.stats-page-title {
    font-size: 2rem; /* Más grande para impacto */
    font-weight: 800;
    color: var(--color-text-primary);
}

.stats-page-subtitle {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
    margin-bottom: 15px;
}

.time-range-selector {
    display: flex;
    background-color: var(--color-card-background);
    padding: 4px;
    border-radius: var(--border-radius-card);
    box-shadow: var(--shadow-soft);
    width: 100%;
    max-width: 350px; /* Limitar ancho en desktop */
}

.time-range-button {
    flex-grow: 1;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    background-color: transparent;
    color: var(--color-text-secondary);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.time-range-button:hover:not(.active) {
    background-color: #F3F4F6;
}

.time-range-button.active {
    background-color: var(--color-primary);
    color: var(--color-card-background);
    box-shadow: var(--shadow-soft);
}

/* --- Sección General de Estadísticas --- */
.stats-section {
    background-color: var(--color-card-background);
    padding: 20px;
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-soft);
    transition: box-shadow 0.3s ease;
}

.stats-section:hover {
    box-shadow: var(--shadow-hover);
}

.stats-section-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #E5E7EB;
}

/* --- Sección Principal de Resumen (Overview) --- */
.stats-overview-grid {
    display: grid;
    grid-template-columns: 1fr; /* Una columna en móvil */
    gap: 15px;
}

.overview-card {
    background-color: var(--color-card-background);
    padding: 20px;
    border-radius: var(--border-radius-card);
    border: 1px solid #E5E7EB;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: transform 0.2s ease;
}

.overview-card:hover {
    transform: translateY(-2px);
}

.card-icon-container {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--color-card-background);
    flex-shrink: 0;
}

/* Estilos de Icono Específicos */
.overview-card:nth-child(1) .card-icon-container { background-color: #3B82F6; } /* Azul - Total */
.overview-card:nth-child(2) .card-icon-container { background-color: #F59E0B; } /* Amarillo - Pendiente */
.overview-card:nth-child(3) .card-icon-container { background-color: var(--color-success-exact); } /* Verde - Acierto */
.overview-card:nth-child(4) .card-icon-container { background-color: var(--color-primary); } /* Púrpura - Tasa */


.card-icon {
    width: 24px;
    height: 24px;
}

.card-content {
    display: flex;
    flex-direction: column;
}

.card-value {
    font-size: 2.2rem;
    font-weight: 800;
    line-height: 1;
    color: var(--color-text-primary);
}

.card-label {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
    font-weight: 500;
    margin-top: 4px;
}


/* --- Resultados de Predicción (Barras de Progreso) --- */
.result-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    gap: 15px;
}

.result-item-label {
    width: 150px;
    font-weight: 600;
    color: var(--color-text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.result-item-value {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--color-text-primary);
    width: 60px;
    text-align: right;
    flex-shrink: 0;
}

.result-bar-container {
    flex-grow: 1;
    height: 10px;
    background-color: #E5E7EB;
    border-radius: 5px;
    overflow: hidden;
}

.result-bar {
    height: 100%;
    transition: width 0.8s ease-out;
}

/* Colores de las Barras */
.result-item.exact .result-bar {
    background-color: var(--color-success-exact);
}
.result-item.correctResult .result-bar {
    background-color: var(--color-success-result);
}
.result-item.wrong .result-bar {
    background-color: var(--color-error);
}

/* --- Estadísticas por Día (Micro-Grid) --- */
.day-stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 columnas en móvil */
    gap: 15px;
}

.day-stat-card {
    background-color: var(--color-card-background);
    padding: 15px;
    border-radius: var(--border-radius-card);
    border: 1px solid #E5E7EB;
    text-align: center;
}

.day-stat-value {
    font-size: 1.8rem;
    font-weight: 800;
    line-height: 1.2;
    color: var(--color-primary);
    margin-top: 5px;
}

.day-stat-label {
    font-size: 0.85rem;
    color: var(--color-text-secondary);
    margin-top: 5px;
}

/* --- Estadísticas Adicionales (Grid de Iconos) --- */
.additional-stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 columnas en móvil */
    gap: 15px;
}

.additional-stat-card {
    background-color: var(--color-card-background);
    padding: 15px;
    border-radius: var(--border-radius-card);
    border: 1px solid #E5E7EB;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
    transition: transform 0.2s ease;
}

.additional-stat-card:hover {
    transform: translateY(-2px);
    border-color: var(--color-primary-light);
}

.additional-stat-icon {
    color: var(--color-primary);
    /* Fondo circular sutil para el icono */
    background-color: #F3E8FF; 
    padding: 8px;
    border-radius: 50%;
    display: flex;
}

.additional-stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1.2;
    color: var(--color-text-primary);
}

.additional-stat-label {
    font-size: 0.8rem;
    color: var(--color-text-secondary);
    font-weight: 500;
}

/* --- Media Queries para PC/Tablet (Diseño Desktop) --- */
@media (min-width: 640px) {
    .stats-page {
        padding: 30px 24px;
    }
    
    .stats-page-header {
        flex-direction: row; /* Volver a horizontal */
        justify-content: space-between;
        align-items: flex-end;
    }

    .header-text-group {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .stats-overview-grid {
        grid-template-columns: repeat(2, 1fr); /* 2 columnas en tablet */
        gap: 20px;
    }

    .day-stats-grid {
        grid-template-columns: repeat(4, 1fr); /* 4 columnas */
    }

    .additional-stats-grid {
        grid-template-columns: repeat(3, 1fr); /* 3 columnas */
    }

    .time-range-selector {
        width: auto;
    }
}

@media (min-width: 1024px) {
    .stats-overview-grid {
        grid-template-columns: repeat(4, 1fr); /* 4 columnas en desktop */
    }

    .additional-stats-grid {
        grid-template-columns: repeat(4, 1fr); /* 4 columnas grandes */
    }

    .result-item-label {
        width: 180px;
    }
}

/* Asegurar que el scroll del contenedor principal no sea visible si no se necesita */
.stats-page-container {
    overflow: hidden;
}

/* Estilo para los textos que muestran si la carga ha fallado o si no hay datos */
.loading-message, .error-message, .no-data-message {
    text-align: center;
    padding: 40px 20px;
    background-color: var(--color-card-background);
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-soft);
    font-size: 1.1rem;
    color: var(--color-text-secondary);
    margin-top: 30px;
}

.loading-message {
    color: var(--color-primary);
    font-weight: 600;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
}

.error-message {
    color: var(--color-error);
}

/* Animación de giro para el indicador de carga */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-message .lucide-icon {
    animation: spin 1s linear infinite;
}